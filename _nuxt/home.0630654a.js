import{a as k,C as H,s as G,i as J,j as U,k as K,l as Y,m as $,p as F,D as Q,R as X,q as I,v as z,x as ee,o as u,c as P,u as l,b as W,y as D,w as E,e as f,z as T,f as c,A as te,B as b,F as q,E as se,G as ae,H as re,I as L,J as ne,K as M,L as oe,M as le,T as ie,N as ce}from"./entry.a04ea546.js";import{_ as R}from"./_plugin-vue_export-helper.a1a6add7.js";var A;(function(a){a.ChartRendered="chart:rendered",a.ChartUpdated="chart:updated",a.ChartDestroyed="chart:destroyed",a.LabelsUpdated="labels:updated"})(A||(A={}));function S(a,e,o,t){a(e,o),t!==void 0&&t.emit(A.ChartRendered)}function ue(a,e){a.update(),e!==void 0&&e.emit(A.ChartUpdated)}function O(a,e){a.destroy(),e!==void 0&&e.emit(A.ChartDestroyed)}function de(a,e){const o={labels:typeof a.labels>"u"?[]:[...a.labels],datasets:[]};return N(o,{...a},e),o}function N(a,e,o){const t=[];a.datasets=e.datasets.map(r=>{const s=a.datasets.find(n=>n[o]===r[o]);return!s||!r.data||t.includes(s)?{...r}:(t.push(s),Object.assign(s,r),s)})}function he(a,e,o){a.data.labels=e,o!==void 0&&o.emit(A.LabelsUpdated)}function fe(a,e){a.options={...e}}function pe(a,e){const o=a.datasets.map(r=>r.label),t=e.datasets.map(r=>r.label);return e.datasets.length===a.datasets.length&&o.every((r,s)=>r===t[s])}const _e="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",me="Update ERROR: chart instance not found",Z=(a,e,o)=>k({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:a},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(t,r){H.register(o);const s=G(null),n=J(null);function h(d,y){if(s.value!==null&&O($(s.value),r),n.value===null)throw new Error(_e);{const i=de(d,t.datasetIdKey),_=n.value.getContext("2d");_!==null&&(s.value=new H(_,{type:e,data:I(d)?new Proxy(i,{}):i,options:y,plugins:t.plugins}))}}function p(d,y){const i=I(d)?$(d):{...d},_=I(y)?$(y):{...y};if(Object.keys(_).length>0){const g=$(s.value);pe(i,_)&&g!==null?(N(g==null?void 0:g.data,i,t.datasetIdKey),i.labels!==void 0&&he(g,i.labels,r),v()):(g!==null&&O(g,r),S(h,t.chartData,t.chartOptions,r))}else s.value!==null&&O($(s.value),r),S(h,t.chartData,t.chartOptions,r)}function m(d){const y=$(s.value);y!==null?(fe(y,d),v()):S(h,t.chartData,t.chartOptions,r)}function v(){const d=$(s.value);d!==null?ue(d,r):console.error(me)}return U(()=>t.chartData,(d,y)=>p(d,y),{deep:!0}),U(()=>t.chartOptions,d=>m(d),{deep:!0}),K(()=>{"datasets"in t.chartData&&t.chartData.datasets.length>0&&S(h,t.chartData,t.chartOptions,r)}),Y(()=>{s.value!==null&&O($(s.value),r)}),r.expose({chart:s,updateChart:v}),()=>F("div",{style:t.styles,class:t.cssClasses},[F("canvas",{id:t.chartId,width:t.width,height:t.height,ref:n})])}}),ve=Z("doughnut-chart","doughnut",Q),ge=Z("radar-chart","radar",X),ye=k({__name:"Doughnut",props:{doughnutData:{default:()=>[{name:"Missing Data",count:1}]}},setup(a){const e=a;H.register(...z);const{doughnutData:o}=ee(e),t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},r={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return o.value.forEach(s=>{r.labels.push(s.name),r.datasets[0].data.push(s.count)}),(s,n)=>(u(),P(l(ve),{"chart-data":r,"chart-options":t}))}}),be=a=>{for(let e=a.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[a[e],a[o]]=[a[o],a[e]]}return a},j=(a,e,o=null)=>{const t=a.slice(0,e),r=Array(e-t.length).fill(o);return[...t,...r]},V=a=>a.replace(/(^\w{1})|(\s+\w{1})/g,e=>e.toUpperCase());async function w({endpoint:a,query:e,body:o,method:t}){const r=localStorage.getItem("auth-token");if(!r)throw await W("/login"),new Error("missing authorization token");let s;return a.startsWith("http")?s=new URL(a):s=new URL(`https://api.spotify.com/v1${a}`),e&&Object.entries(e).forEach(([n,h])=>s.searchParams.append(n,h)),fetch(s,{method:t!=null?t:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:o?JSON.stringify(o):void 0}).then(async n=>{if(n.status===204)return null;if(n.status===403||n.status===401)throw await W("/login"),new Error(n.status+": "+n.statusText);return n.json()}).then(n=>{if(n!=null&&n.error)throw n.error.status?new Error(n.error.status+": "+n.error.message):new Error(n.error+": "+n.error_description);return n})}var C=(a=>(a[a.Month=0]="Month",a[a.HalfYear=1]="HalfYear",a[a.Year=2]="Year",a))(C||{});const B={[0]:"short_term",[1]:"medium_term",[2]:"long_term"},we={class:"w-full h-full flex flex-col justify-center items-center"},Ce=c("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),ke=c("p",{class:"text-gray"},"We found to what genres you like",-1),xe=k({__name:"GenreDoughnut",async setup(a){var n;let e,o;const t=D("activeTimeframe").value,r=([e,o]=E(()=>w({endpoint:"/me/top/artists",query:{time_range:B[t]}}).catch(console.error)),e=await e,o(),e),s=[];return(n=r==null?void 0:r.items)==null||n.forEach(h=>h.genres.forEach(p=>{p=V(p);const m=s.find(v=>v.name===p);m?m.count++:s.length<20&&s.push({name:p,count:1})})),(h,p)=>(u(),f("section",we,[Ce,T(ye,{"doughnut-data":s}),ke]))}}),$e=k({__name:"RadarChart",props:{data:null},setup(a){const e=a;H.register(...z);const o={plugins:{legend:{display:!1}},scales:{r:{angleLines:{display:!1},beginAtZero:!0,pointLabels:{display:!0,color:"white"},ticks:{display:!1},grid:{display:!0,color:"gray"}}}},t="#1DB954",r="#1DB95444",s="#eeeeee",n={labels:[],datasets:[{data:[],fill:!0,borderWidth:3,backgroundColor:r,borderColor:t,pointBackgroundColor:t,pointBorderColor:s,pointHoverBackgroundColor:s,pointHoverBorderColor:s}]};return e.data.forEach(h=>{var p;(p=n.labels)==null||p.push(h.name),n.datasets[0].data.push(h.value)}),(h,p)=>(u(),P(l(ge),{"chart-data":n,"chart-options":o}))}}),De={class:"w-full h-full flex flex-col justify-center items-center"},Te=c("h1",{class:"text-[30px] pb-6"},"Your Top Tracks Analysed",-1),Ae=c("p",{class:"text-gray"},"We analysed your Top Tracks for audio features",-1),Ee=k({__name:"AudioFeaturesRadarChart",async setup(a){let e,o;const t=D("activeTimeframe"),s=([e,o]=E(()=>w({endpoint:"/me/top/tracks",query:{limit:50,time_range:B[t.value]}})),e=await e,o(),e).items.map(v=>v.id),n=([e,o]=E(()=>w({endpoint:"/audio-features",query:{ids:s.join(",")}})),e=await e,o(),e),h={acousticness:0,danceability:0,energy:0,instrumentalness:0,liveness:0,speechiness:0,valence:0};n.audio_features.forEach(v=>{Object.keys(h).forEach(d=>{h[d]+=v[d]})});const p=n.audio_features.length,m=Object.entries(h).map(([v,d])=>({name:V(v),value:d/p}));return(v,d)=>(u(),f("section",De,[Te,T($e,{data:l(m)},null,8,["data"]),Ae]))}}),Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 509.94 795.87"},Se=te('<path d="M30.23 0h449.48c16.68 0 30.23 13.54 30.23 30.23v276.35H0V30.23C0 13.54 13.54 0 30.23 0Z" style="fill:#17164b;"></path><path d="M0 306.58h509.94V765.8c0 16.59-13.47 30.07-30.07 30.07H30.07C13.47 795.87 0 782.4 0 765.8V306.58Z" style="fill:#34416d;"></path><path style="fill:#fdfdfd;" d="m0 306.58 52.65-102.97 24-12.38 3.09-12.78 15.49-21.68 66.19-126.96 78.19 13.16 45.29 88.64 33.68-16.64 53.03 56.9 12 .78 8.13 1.16 6.97 8.9 51.1 80.9 48 12.39 12.13 30.58H0z"></path><path style="fill:#eff6fc;" d="m0 306.58 59.81-88.26 12-7.74 34.84 4.45 72.58-168.97 44.71 10.26 53.61 106.84 8.13-30.58 31.55-17.23 35.8 52.65 6.78 15.29 14.9 6.58 4.84 4.45 1.74 12.58 5.42 17.42L408.39 264l43.74 8.71 17.03 33.87H0z"></path><path style="fill:#c6dced;" d="m0 306.58 74.52-55.74h29.61l23.61 7.74 33.29-69.87 29.23-31.74 12-4.07-11.61 67.94-4.07 31.55 6 1.35 44.71-53.22 16.65.19 17.41 20.71 21.49 5.61 14.51-14.71 15.3-3.09 33.29 26.71 19.54 44.12 48.39 1.75 39.1 24.77H0z"></path><path fill="#2433ab" d="m0 306.58 6.19 40.26 54.2 22.45 41.03 108.39 11.61 3.87h11.62l11.61 27.1 11.61 17.03L202.84 576l28.64 40.26 34.07 89.8 5.42-6.96 3.87 17.8h9.29l30.97-65.03 18.58-24 30.97-52.64 31.74-10.84 43.35-120.78 70.2-137.03H0z"></path><path fill="#00025F" fill-opacity=".2" d="M0 306.58h509.94v460.13c0 16.11-13.06 29.16-29.16 29.16H29.16C13.06 795.87 0 782.81 0 766.71V306.58Z"></path><path fill="#00025F" fill-opacity=".2" d="M0 422.81s58.32-23.12 133.68 0 100.13 7.85 128 0 71.23-22.09 140.39 0 107.87 0 107.87 0v343.76c0 16.18-13.12 29.29-29.29 29.29H29.29C13.12 795.87 0 782.76 0 766.58V422.81Z"></path><path fill="#00025F" fill-opacity=".2" d="M0 520.26s12.9-4.34 39.74 18.99 84.65 0 91.87 0 53.68-21.26 123.35 0 108.69 11.4 131.61 0 87.74-22.3 123.35 0v227.2c0 16.25-13.17 29.42-29.42 29.42H29.42C13.17 795.87 0 782.7 0 766.45V520.26Z"></path><path fill="#00025F" fill-opacity=".2" d="M0 667.87s32.52 1.45 64.52-12.18 72.26-8.05 98.06 0 69.16 31.48 136.26 2.22 114.58-2.22 114.58-2.22 47.48 29.11 96.52 0v110.24c0 16.53-13.4 29.94-29.94 29.94H29.94C13.4 795.87 0 782.47 0 765.93v-98.06Z"></path>',10),Oe=[Se];function je(a,e){return u(),f("svg",Me,Oe)}const He={render:je},Ie=a=>(ae("data-v-9cc181c3"),a=a(),re(),a),Le={class:"flex flex-col w-full h-full"},Pe=Ie(()=>c("h1",{class:"text-[30px] pb-6 text-center"},"Your Favorite Artists on the Popularity Iceberg",-1)),Re={class:"w-full grow relative"},Be=["src"],Ue=["src"],Fe=["src"],We=["src"],qe=["src"],Ye=["src"],ze=["src"],Ne=["src"],Ze={class:"absolute inset-x-[10%] top-[38%] bottom-0 grid grid-cols-5 grid-rows-4 place-items-center"},Ve=["src"],Ge=k({__name:"ArtistIceberg",async setup(a){let e,o;const t=([e,o]=E(()=>w({endpoint:"/me/top/artists",query:{time_range:B[D("activeTimeframe").value],limit:50}})),e=await e,o(),e),r=[[],[],[],[],[],[],[]];t.items.forEach(n=>{n.popularity>90?r[0].push(n):n.popularity>80?r[1].push(n):n.popularity>70?r[2].push(n):n.popularity>60?r[3].push(n):n.popularity>50?r[4].push(n):n.popularity>40?r[5].push(n):r[6].push(n)}),r[0]=j(r[0],1),r[1]=j(r[1],3),r[2]=j(r[2],4),[3,4,5,6].forEach(n=>{r[n]=j(r[n],5)});const s=r.map(n=>be(n)).flat().flatMap(n=>n===null?null:n.images[0].url);return(n,h)=>(u(),f("section",Le,[Pe,c("div",Re,[T(l(He),{class:"absolute h-full w-full"}),l(s)[0]?(u(),f("img",{key:0,src:l(s)[0],class:"overWaterAlbumCover left-[35%] top-[10%]"},null,8,Be)):b("",!0),l(s)[1]?(u(),f("img",{key:1,src:l(s)[1],class:"overWaterAlbumCover left-[25%] top-[20%]"},null,8,Ue)):b("",!0),l(s)[2]?(u(),f("img",{key:2,src:l(s)[2],class:"overWaterAlbumCover left-[40%] top-[20%]"},null,8,Fe)):b("",!0),l(s)[3]?(u(),f("img",{key:3,src:l(s)[3],class:"overWaterAlbumCover left-[55%] top-[20%]"},null,8,We)):b("",!0),l(s)[4]?(u(),f("img",{key:4,src:l(s)[4],class:"overWaterAlbumCover left-[15%] top-[30%]"},null,8,qe)):b("",!0),l(s)[5]?(u(),f("img",{key:5,src:l(s)[5],class:"overWaterAlbumCover left-[32%] top-[30%]"},null,8,Ye)):b("",!0),l(s)[6]?(u(),f("img",{key:6,src:l(s)[6],class:"overWaterAlbumCover left-[48%] top-[30%]"},null,8,ze)):b("",!0),l(s)[7]?(u(),f("img",{key:7,src:l(s)[7],class:"overWaterAlbumCover left-[65%] top-[30%]"},null,8,Ne)):b("",!0),c("div",Ze,[(u(!0),f(q,null,se(l(s).slice(8,29),(p,m)=>(u(),f(q,{key:m+p},[p?(u(),f("img",{key:0,src:p,class:"w-10 h-10"},null,8,Ve)):b("",!0)],64))),128))])])]))}}),Je=R(Ge,[["__scopeId","data-v-9cc181c3"]]),Ke={class:"w-full flex justify-around font-bold pt-6 pb-2"},Qe=k({__name:"TimeframeSelection",setup(a){const e=D("activeTimeframe",()=>C.Month);return(o,t)=>(u(),f("div",Ke,[c("span",{class:L(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[l(e)===l(C).Month?"before:w-full !text-white":"before:w-0"]]),onClick:t[0]||(t[0]=r=>e.value=l(C).Month)}," last month ",2),c("span",{class:L(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[l(e)===l(C).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:t[1]||(t[1]=r=>e.value=l(C).HalfYear)}," last 6 months ",2),c("span",{class:L(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[l(e)===l(C).Year?"before:w-full !text-white":"before:w-0"]]),onClick:t[2]||(t[2]=r=>e.value=l(C).Year)}," last year ",2)]))}}),Xe=R(Qe,[["__scopeId","data-v-e7d2fb3c"]]),et={key:0,class:"bg-spotify-green bg-opacity-50"},tt={key:0},st={class:"flex h-16 justify-start"},at={class:"h-full p-1"},rt=["src"],nt={class:"my-auto"},ot={class:"text-white"},lt={class:"text-[#bbb]"},it={class:"my-auto w-24 text-center self-center"},ct={key:0,class:"flex align-baseline justify-evenly"},ut={class:"h-1 relative"},dt=c("div",{class:"absolute bg-gray h-full w-full"},null,-1),ht={key:1,class:"text-center h-16"},ft=k({__name:"MusicPlayer",async setup(a){let e,o;const t=D(()=>null,"$y4C0JPT9MN"),r=([e,o]=E(()=>w({endpoint:"/me"})),e=await e,o(),e),s=D(()=>({progress:0,percent:0,fetched:0}),"$pmQmXMhZQP");let n;ne(()=>{m(),n=setInterval(p,250)}),Y(()=>{clearInterval(n)});function h(i){if(i===null)return"~:~";const _=Math.floor(i/1e3);return`${Math.floor(_/60)}:${(_%60).toString().padStart(2,"0")}`}function p(){var g,x;const i=t.value;if(!((i==null?void 0:i.progress_ms)&&((g=i==null?void 0:i.item)==null?void 0:g.duration_ms)))return;let _=i.progress_ms;i.is_playing&&(_=i.progress_ms+(Date.now()-s.value.fetched)),s.value={progress:_,percent:_/((x=i.item)==null?void 0:x.duration_ms),fetched:s.value.fetched}}function m(){w({endpoint:"/me/player",query:{additional_types:"track",market:r.country}}).then(i=>{t.value=i,s.value.fetched=Date.now(),setTimeout(()=>m(),2500)}).catch(i=>{console.error(i),setTimeout(()=>m(),1e4)})}function v(){w({endpoint:"/me/player/previous",method:"POST"}).catch(i=>{alert(i.message)})}function d(){t.value!==null&&(t.value.is_playing?w({endpoint:"/me/player/pause",method:"PUT",query:{device_id:t.value.device.id}}).catch(i=>{alert(i.message)}):w({endpoint:"/me/player/play",method:"PUT",query:{device_id:t.value.device.id}}).catch(i=>{alert(i.message)}))}function y(){w({endpoint:"/me/player/next",method:"POST"}).catch(i=>{alert(i.message)})}return(i,_)=>{var g;return u(),f("div",null,[l(t)?(u(),f("div",et,[l(t).item?(u(),f("div",tt,[c("div",st,[c("div",at,[c("img",{class:"max-h-full",src:(g=l(t).item.album.images[0])==null?void 0:g.url,alt:"Album Cover"},null,8,rt)]),c("div",nt,[c("p",ot,M(l(t).item.name),1),c("p",lt,M(l(t).item.artists.map(x=>x.name).join(", ")),1)]),c("div",it,[l(r).product==="premium"?(u(),f("div",ct,[c("button",{onClick:_[0]||(_[0]=x=>v())},"\u23EE"),c("button",{onClick:_[1]||(_[1]=x=>d())},"\u23EF"),c("button",{onClick:_[2]||(_[2]=x=>y())},"\u23ED")])):b("",!0),c("p",null,M(h(l(s)?l(s).progress:null))+" / "+M(h(l(t).item.duration_ms)),1)])]),c("div",ut,[dt,c("div",{class:"absolute bg-white h-full",style:oe({width:`${l(s).percent*100}%`})},null,4)])])):(u(),f("div",ht," Ad is playing "))])):b("",!0)])}}}),pt={class:"flex flex-col items-center"},_t={class:"h-[80vh] w-[400px] relative"},mt=k({__name:"home",setup(a){const e=D("currentSlide",()=>0),o=D("activeTimeframe",()=>C.Month),t=[xe,Ee,Je],r=()=>{e.value++,e.value>=t.length&&(e.value=0)},s=()=>{e.value--,e.value<0&&(e.value=t.length-1)};return(n,h)=>{const p=Xe,m=ft;return u(),f("section",pt,[T(p,{class:"pb-5"}),c("div",_t,[T(ie,{name:"statistics",mode:"out-in"},{default:le(()=>[(u(),P(ce(t[l(e)]),{key:l(o)}))]),_:1}),c("div",{class:"absolute top-0 flex w-full h-full"},[c("button",{class:"w-1/3 h-full no-tap-highlight",onClick:s}),c("button",{class:"w-2/3 h-full no-tap-highlight",onClick:r})])]),T(m)])}}});const yt=R(mt,[["__scopeId","data-v-3836d11d"]]);export{yt as default};
