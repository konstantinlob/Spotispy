import{j as d,a as p,f,o as u,b as m,e as s,k as h}from"./entry.afb09963.js";const _=""+new URL("Spotify_Logo_White.ef7c01a4.svg",import.meta.url).href,g=""+new URL("Github_Logo_Black.2d65077f.svg",import.meta.url).href;function x(e){const t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),t}function y(e){const t=d.exports.lib.WordArray.random(e),r=[];return t.words.forEach(i=>{const c=x(i),o=new Uint8Array(c);for(let n=0;n<4;n++)r.push(o[n])}),r}function b(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";let r="";const i=y(e);for(let c=0;c<e;c++){const o=i[c]%t.length;r+=t[o]}return r}function v(e){return b(e)}function w(e){return d.exports.SHA256(e).toString(d.exports.enc.Base64url)}function $(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;const t=v(e),r=w(t);return{code_verifier:t,code_challenge:r}}const S={class:"flex flex-col items-center justify-between h-full"},L={class:"flex flex-col items-center justify-evenly grow"},k=s("div",null,[s("h1",{class:"flex justify-center text-xl font-bold"},"What Am I Listening To?"),s("h2",{class:"flex justify-center"},"Analyze your listening habits")],-1),A={class:"flex flex-col items-center"},B=s("img",{src:_,alt:"Spotify Logo",class:"h-10"},null,-1),R=s("span",{class:"pl-2 text-[25px]"},"login",-1),j=[B,R],P=s("span",{class:"flex items-center"},"Secured by OAuth2.0",-1),U=h('<div class="flex flex-col items-center"><button class="bg-purple px-4 py-2 h-min rounded-lg flex flex-row items-center font-bold"><img src="'+g+'" alt="GitHub Logo" class="h-8"><span class="pl-2 text-[20px]">GitHub repo</span></button><span class="text-center w-full">Developled by <br> Benjamin Tallarek, Julius J\xE4nchen, Konstantin Lobmayr, Pascal Heyn, Robin Walter</span></div>',1),V=p({__name:"login",setup(e){localStorage.getItem("auth-token")!==null&&f("/home");const t="20aa48c2719e42c0be5f3b834942f06d",r=[];function i(o=15){var n=new Uint8Array(o/2);return window.crypto.getRandomValues(n),Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}async function c(){const o=new URL(window.location.href);o.search="",o.pathname=o.pathname.replace("login","auth");const n=i();localStorage.setItem("auth-state",n);const l=$();localStorage.setItem("code-verifier",l.code_verifier);const a=new URL("/authorize","https://accounts.spotify.com/");a.searchParams.append("client_id",t),a.searchParams.append("response_type","code"),a.searchParams.append("redirect_uri",o.toString()),a.searchParams.append("scopes",r.join(" ")),a.searchParams.append("state",n),a.searchParams.append("code_challenge_method","S256"),a.searchParams.append("code_challenge",l.code_challenge),f(a.toString(),{external:!0})}return(o,n)=>(u(),m("div",S,[s("div",L,[k,s("div",A,[s("button",{onClick:n[0]||(n[0]=l=>c()),class:"bg-spotify-green px-8 py-4 h-min rounded-lg flex flex-row items-center font-bold"},j),P])]),U]))}});export{V as default};
