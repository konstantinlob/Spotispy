var B=Object.defineProperty;var U=(s,t,a)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var x=(s,t,a)=>(U(s,typeof t!="symbol"?t+"":t,a),a);import{a as g,C as E,s as N,r as P,w as z,i as G,j as Z,k as v,l as q,D as F,m as I,p as V,q as W,o as d,c as R,u as c,f as L,v as O,x as j,b as _,y as C,e as y,z as K,F as J,A as X,B as Q,E as T,G as tt,T as et,H as st}from"./entry.33109752.js";import{_ as Y}from"./_plugin-vue_export-helper.af303bb4.js";var D;(function(s){s.ChartRendered="chart:rendered",s.ChartUpdated="chart:updated",s.ChartDestroyed="chart:destroyed",s.LabelsUpdated="labels:updated"})(D||(D={}));function $(s,t,a,e){s(t,a),e!==void 0&&e.emit(D.ChartRendered)}function at(s,t){s.update(),t!==void 0&&t.emit(D.ChartUpdated)}function k(s,t){s.destroy(),t!==void 0&&t.emit(D.ChartDestroyed)}function nt(s,t){const a={labels:typeof s.labels>"u"?[]:[...s.labels],datasets:[]};return A(a,{...s},t),a}function A(s,t,a){const e=[];s.datasets=t.datasets.map(n=>{const r=s.datasets.find(o=>o[a]===n[a]);return!r||!n.data||e.includes(r)?{...n}:(e.push(r),Object.assign(r,n),r)})}function rt(s,t,a){s.data.labels=t,a!==void 0&&a.emit(D.LabelsUpdated)}function ot(s,t){s.options={...t}}function lt(s,t){const a=s.datasets.map(n=>n.label),e=t.datasets.map(n=>n.label);return t.datasets.length===s.datasets.length&&a.every((n,r)=>n===e[r])}const it="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",ct="Update ERROR: chart instance not found",ut=(s,t,a)=>g({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:s},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(e,n){E.register(a);const r=N(null),o=P(null);function l(i,m){if(r.value!==null&&k(v(r.value),n),o.value===null)throw new Error(it);{const b=nt(i,e.datasetIdKey),S=o.value.getContext("2d");S!==null&&(r.value=new E(S,{type:t,data:I(i)?new Proxy(b,{}):b,options:m,plugins:e.plugins}))}}function h(i,m){const b=I(i)?v(i):{...i},S=I(m)?v(m):{...m};if(Object.keys(S).length>0){const w=v(r.value);lt(b,S)&&w!==null?(A(w==null?void 0:w.data,b,e.datasetIdKey),b.labels!==void 0&&rt(w,b.labels,n),u()):(w!==null&&k(w,n),$(l,e.chartData,e.chartOptions,n))}else r.value!==null&&k(v(r.value),n),$(l,e.chartData,e.chartOptions,n)}function p(i){const m=v(r.value);m!==null?(ot(m,i),u()):$(l,e.chartData,e.chartOptions,n)}function u(){const i=v(r.value);i!==null?at(i,n):console.error(ct)}return z(()=>e.chartData,(i,m)=>h(i,m),{deep:!0}),z(()=>e.chartOptions,i=>p(i),{deep:!0}),G(()=>{"datasets"in e.chartData&&e.chartData.datasets.length>0&&$(l,e.chartData,e.chartOptions,n)}),Z(()=>{r.value!==null&&k(v(r.value),n)}),n.expose({chart:r,updateChart:u}),()=>q("div",{style:e.styles,class:e.cssClasses},[q("canvas",{id:e.chartId,width:e.width,height:e.height,ref:o})])}}),ht=ut("doughnut-chart","doughnut",F),ft=g({__name:"Doughnut",props:{doughnutData:{default:()=>[{name:"Missing Data",count:1}]}},setup(s){const t=s;E.register(...V);const{doughnutData:a}=W(t),e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},n={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return a.value.forEach(r=>{n.labels.push(r.name),n.datasets[0].data.push(r.count)}),(r,o)=>(d(),R(c(ht),{"chart-data":n,"chart-options":e}))}});function H({endpoint:s,query:t,body:a,method:e}){const n=localStorage.getItem("auth-token");if(!n)throw L("/login"),new Error("missing authorization token");let r;return s.startsWith("http")?r=new URL(s):r=new URL(`https://api.spotify.com/v1${s}`),t&&Object.entries(t).forEach(([o,l])=>r.searchParams.append(o,l)),fetch(r,{method:e!=null?e:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then(o=>{if(o.status===204)return null;if(o.status===403||o.status===401)throw L("/login"),new Error(o.status+": "+o.statusText);return o.json()}).then(o=>{var l;if(o!=null&&o.error)throw(l=o.error)!=null&&l.status?new Error(o.error.status+": "+o.error.message):new Error(o.error+": "+o.error_description);return o})}var f=(s=>(s[s.Month=0]="Month",s[s.HalfYear=1]="HalfYear",s[s.Year=2]="Year",s))(f||{});const dt={class:"w-full h-full flex flex-col justify-center items-center"},pt=y("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),mt=g({__name:"GenreDoughnut",async setup(s){let t,a;const e=O("activeTimeframe").value,n={[f.Month]:"short_term",[f.HalfYear]:"medium_term",[f.Year]:"long_term"},r=([t,a]=j(()=>H({endpoint:"/me/top/artists",query:{time_range:n[e]}}).catch(console.error)),t=await t,a(),t),o=[];return r==null||r.items.forEach(l=>l.genres.forEach(h=>{o.length>=20||(o.some(p=>p.name===h)?o.find(p=>p.name===h).count++:o.push({name:h,count:1}))})),(l,h)=>(d(),_("section",dt,[pt,C(ft,{"doughnut-data":o})]))}});class _t{constructor(t,a,e){x(this,"top");x(this,"right");x(this,"bottom");x(this,"left");this.left=t,this.right=t+e,this.top=a+e,this.bottom=a}overlaps(t){const a=this.left<=t.right&&this.right>=t.left,e=this.top>=t.bottom&&this.bottom<=t.top;return a&&e}}class gt{constructor(t){x(this,"size");x(this,"squares");this.size=t,this.squares=[]}getNext(t){const a=[...Array(100-this.size).keys()];let e=null;for(;a.length;){const n=Math.floor(Math.random()*a.length),r=a.splice(n,1)[0],o=new _t(r,t,this.size);if(this.isFree(o)){this.squares.push(o),e=r;break}}return e===null?(console.warn("Hidden"),{display:"none"}):{left:`${e}%`,bottom:`${t}%`}}isFree(t){for(const a of this.squares)if(a.overlaps(t))return!1;return!0}}const vt={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 509.94 795.87"},yt=K('<defs></defs><path d="M30.23 0h449.48c16.68 0 30.23 13.54 30.23 30.23v276.35H0V30.23C0 13.54 13.54 0 30.23 0Z" style="fill:#17164b;"></path><path d="M0 306.58h509.94V765.8c0 16.59-13.47 30.07-30.07 30.07H30.07C13.47 795.87 0 782.4 0 765.8V306.58Z" style="fill:#34416d;"></path><path style="fill:#fdfdfd;" d="m0 306.58 52.65-102.97 24-12.38 3.09-12.78 15.49-21.68 66.19-126.96 78.19 13.16 45.29 88.64 33.68-16.64 53.03 56.9 12 .78 8.13 1.16 6.97 8.9 51.1 80.9 48 12.39 12.13 30.58H0z"></path><path style="fill:#eff6fc;" d="m0 306.58 59.81-88.26 12-7.74 34.84 4.45 72.58-168.97 44.71 10.26 53.61 106.84 8.13-30.58 31.55-17.23 35.8 52.65 6.78 15.29 14.9 6.58 4.84 4.45 1.74 12.58 5.42 17.42L408.39 264l43.74 8.71 17.03 33.87H0z"></path><path style="fill:#c6dced;" d="m0 306.58 74.52-55.74h29.61l23.61 7.74 33.29-69.87 29.23-31.74 12-4.07-11.61 67.94-4.07 31.55 6 1.35 44.71-53.22 16.65.19 17.41 20.71 21.49 5.61 14.51-14.71 15.3-3.09 33.29 26.71 19.54 44.12 48.39 1.75 39.1 24.77H0z"></path><path style="fill:#2433ab;" d="m0 306.58 6.19 40.26 54.2 22.45 41.03 108.39 11.61 3.87h11.62l11.61 27.1 11.61 17.03L202.84 576l28.64 40.26 34.07 89.8 5.42-6.96 3.87 17.8h9.29l30.97-65.03 18.58-24 30.97-52.64 31.74-10.84 43.35-120.78 70.2-137.03H0z"></path><path id="Shading_1" class="cls-1" d="M0 422.81s58.32-23.12 133.68 0 100.13 7.85 128 0 71.23-22.09 140.39 0 107.87 0 107.87 0v343.76c0 16.18-13.12 29.29-29.29 29.29H29.29C13.12 795.87 0 782.76 0 766.58V422.81Z"></path><path id="Shading_2" class="cls-1" d="M0 520.26s12.9-4.34 39.74 18.99 84.65 0 91.87 0 53.68-21.26 123.35 0 108.69 11.4 131.61 0 87.74-22.3 123.35 0v227.2c0 16.25-13.17 29.42-29.42 29.42H29.42C13.17 795.87 0 782.7 0 766.45V520.26Z"></path><path id="Shading_3" class="cls-1" d="M0 667.87s32.52 1.45 64.52-12.18 72.26-8.05 98.06 0 69.16 31.48 136.26 2.22 114.58-2.22 114.58-2.22 47.48 29.11 96.52 0v110.24c0 16.53-13.4 29.94-29.94 29.94H29.94C13.4 795.87 0 782.47 0 765.93v-98.06Z"></path><path class="cls-1" d="M0 306.58h509.94v460.13c0 16.11-13.06 29.16-29.16 29.16H29.16C13.06 795.87 0 782.81 0 766.71V306.58Z"></path>',11),bt=[yt];function wt(s,t){return d(),_("svg",vt,bt)}const xt={render:wt},Ct={class:"w-full h-full relative"},Dt=["src","title"],M=g({__name:"Iceberg",props:{items:null,gridItemSize:null},setup(s){var n;const t=s,a=10,e=new gt((n=t.gridItemSize)!=null?n:a);return(r,o)=>(d(),_("div",Ct,[C(c(xt),{class:"absolute h-full w-full"}),(d(!0),_(J,null,X(t.items,l=>{var h;return d(),_("img",{key:l.info,class:"absolute h-auto",style:Q({width:`${(h=t.gridItemSize)!=null?h:a}%`,...c(e).getNext(l.level)}),src:l.imageSrc,title:l.info},null,12,Dt)}),128))]))}}),St={class:"w-full h-full flex flex-col justify-center items-center"},$t=y("h1",{class:"text-[30px] pb-6"},"Recently Played Tracks",-1),kt=g({__name:"RecentlyPlayedTracks",async setup(s){let t,a;const e=[];let n="/me/player/recently-played";for(;n!=null;){const l=([t,a]=j(()=>H({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items.map(h=>h.track)),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return(l,h)=>{const p=M;return d(),_("section",St,[$t,C(p,{items:c(o).map(u=>{var i;return{info:u.name,imageSrc:(i=u.album.images[0])==null?void 0:i.url,level:u.popularity}})},null,8,["items"])])}}}),Ot={class:"w-full h-full flex flex-col justify-center items-center"},jt=y("h1",{class:"text-[30px] pb-6"},"Top Tracks",-1),Ht=g({__name:"TopTracks",async setup(s){let t,a;const e=[];let n="/me/top/tracks";for(;n!=null;){const l=([t,a]=j(()=>H({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return(l,h)=>{const p=M;return d(),_("section",Ot,[jt,C(p,{items:c(o).map(u=>{var i;return{info:u.name,imageSrc:(i=u.album.images[0])==null?void 0:i.url,level:u.popularity}})},null,8,["items"])])}}}),It={class:"w-full h-full flex flex-col justify-center items-center"},Tt=y("h1",{class:"text-[30px] pb-6"},"Top Artists",-1),Et=g({__name:"TopArtists",async setup(s){let t,a;const e=[];let n="/me/top/artists";for(;n!=null;){const l=([t,a]=j(()=>H({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return console.log(o),(l,h)=>{const p=M;return d(),_("section",It,[Tt,C(p,{items:c(o).map(u=>{var i;return{info:u.name,imageSrc:(i=u.images[0])==null?void 0:i.url,level:u.popularity}})},null,8,["items"])])}}}),Mt={class:"w-full flex justify-around font-bold pt-6 pb-2"},zt=g({__name:"TimeframeSelection",setup(s){const t=O("activeTimeframe",()=>f.Month);return(a,e)=>(d(),_("div",Mt,[y("span",{class:T(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(t)===c(f).Month?"before:w-full !text-white":"before:w-0"]]),onClick:e[0]||(e[0]=n=>t.value=c(f).Month)}," last month ",2),y("span",{class:T(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(t)===c(f).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:e[1]||(e[1]=n=>t.value=c(f).HalfYear)}," last 6 months ",2),y("span",{class:T(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(t)===c(f).Year?"before:w-full !text-white":"before:w-0"]]),onClick:e[2]||(e[2]=n=>t.value=c(f).Year)}," last year ",2)]))}}),qt=Y(zt,[["__scopeId","data-v-e7d2fb3c"]]),Lt={class:"flex justify-center items-center h-[80vh] w-full p-5"},Rt=g({__name:"home",setup(s){const t=O("currentSlide",()=>0),a=O("activeTimeframe",()=>f.Month),e=[mt,kt,Ht,Et],n=()=>{t.value++,t.value>=e.length&&(t.value=0)};return(r,o)=>{const l=qt;return d(),_("section",null,[C(l),y("div",Lt,[C(et,{name:"statistics",mode:"out-in"},{default:tt(()=>[(d(),R(st(e[c(t)]),{key:c(a),onClick:n}))]),_:1})])])}}});const Nt=Y(Rt,[["__scopeId","data-v-c742f18f"]]);export{Nt as default};
