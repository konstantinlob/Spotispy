var B=Object.defineProperty;var F=(s,t,a)=>t in s?B(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var k=(s,t,a)=>(F(s,typeof t!="symbol"?t+"":t,a),a);import{a as b,C as q,s as G,r as V,w as z,i as Z,j as J,k as w,l as L,D as W,m as E,p as K,q as X,o as f,c as A,u,f as R,v as D,x as T,b as p,y as x,e as h,z as Q,F as tt,A as et,B as U,E as H,G as O,H as I,I as st,T as at,J as nt}from"./entry.8379185c.js";import{_ as Y}from"./_plugin-vue_export-helper.af303bb4.js";var $;(function(s){s.ChartRendered="chart:rendered",s.ChartUpdated="chart:updated",s.ChartDestroyed="chart:destroyed",s.LabelsUpdated="labels:updated"})($||($={}));function j(s,t,a,e){s(t,a),e!==void 0&&e.emit($.ChartRendered)}function rt(s,t){s.update(),t!==void 0&&t.emit($.ChartUpdated)}function M(s,t){s.destroy(),t!==void 0&&t.emit($.ChartDestroyed)}function ot(s,t){const a={labels:typeof s.labels>"u"?[]:[...s.labels],datasets:[]};return N(a,{...s},t),a}function N(s,t,a){const e=[];s.datasets=t.datasets.map(n=>{const r=s.datasets.find(o=>o[a]===n[a]);return!r||!n.data||e.includes(r)?{...n}:(e.push(r),Object.assign(r,n),r)})}function lt(s,t,a){s.data.labels=t,a!==void 0&&a.emit($.LabelsUpdated)}function it(s,t){s.options={...t}}function ct(s,t){const a=s.datasets.map(n=>n.label),e=t.datasets.map(n=>n.label);return t.datasets.length===s.datasets.length&&a.every((n,r)=>n===e[r])}const ut="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",ht="Update ERROR: chart instance not found",dt=(s,t,a)=>b({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:s},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(e,n){q.register(a);const r=G(null),o=V(null);function l(i,m){if(r.value!==null&&M(w(r.value),n),o.value===null)throw new Error(ut);{const g=ot(i,e.datasetIdKey),S=o.value.getContext("2d");S!==null&&(r.value=new q(S,{type:t,data:E(i)?new Proxy(g,{}):g,options:m,plugins:e.plugins}))}}function d(i,m){const g=E(i)?w(i):{...i},S=E(m)?w(m):{...m};if(Object.keys(S).length>0){const C=w(r.value);ct(g,S)&&C!==null?(N(C==null?void 0:C.data,g,e.datasetIdKey),g.labels!==void 0&&lt(C,g.labels,n),c()):(C!==null&&M(C,n),j(l,e.chartData,e.chartOptions,n))}else r.value!==null&&M(w(r.value),n),j(l,e.chartData,e.chartOptions,n)}function _(i){const m=w(r.value);m!==null?(it(m,i),c()):j(l,e.chartData,e.chartOptions,n)}function c(){const i=w(r.value);i!==null?rt(i,n):console.error(ht)}return z(()=>e.chartData,(i,m)=>d(i,m),{deep:!0}),z(()=>e.chartOptions,i=>_(i),{deep:!0}),Z(()=>{"datasets"in e.chartData&&e.chartData.datasets.length>0&&j(l,e.chartData,e.chartOptions,n)}),J(()=>{r.value!==null&&M(w(r.value),n)}),n.expose({chart:r,updateChart:c}),()=>L("div",{style:e.styles,class:e.cssClasses},[L("canvas",{id:e.chartId,width:e.width,height:e.height,ref:o})])}}),ft=dt("doughnut-chart","doughnut",W),pt=b({__name:"Doughnut",props:{doughnutData:{default:()=>[{name:"Missing Data",count:1}]}},setup(s){const t=s;q.register(...K);const{doughnutData:a}=X(t),e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},n={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return a.value.forEach(r=>{n.labels.push(r.name),n.datasets[0].data.push(r.count)}),(r,o)=>(f(),A(u(ft),{"chart-data":n,"chart-options":e}))}});function v({endpoint:s,query:t,body:a,method:e}){const n=localStorage.getItem("auth-token");if(!n)throw R("/login"),new Error("missing authorization token");let r;return s.startsWith("http")?r=new URL(s):r=new URL(`https://api.spotify.com/v1${s}`),t&&Object.entries(t).forEach(([o,l])=>r.searchParams.append(o,l)),fetch(r,{method:e!=null?e:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:a?JSON.stringify(a):void 0}).then(o=>{if(o.status===204)return null;if(o.status===403||o.status===401)throw R("/login"),new Error(o.status+": "+o.statusText);return o.json()}).then(o=>{var l;if(o!=null&&o.error)throw(l=o.error)!=null&&l.status?new Error(o.error.status+": "+o.error.message):new Error(o.error+": "+o.error_description);return o})}var y=(s=>(s[s.Month=0]="Month",s[s.HalfYear=1]="HalfYear",s[s.Year=2]="Year",s))(y||{});const mt={class:"w-full h-full flex flex-col justify-center items-center"},_t=h("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),gt=b({__name:"GenreDoughnut",async setup(s){let t,a;const e=D("activeTimeframe").value,n={[y.Month]:"short_term",[y.HalfYear]:"medium_term",[y.Year]:"long_term"},r=([t,a]=T(()=>v({endpoint:"/me/top/artists",query:{time_range:n[e]}}).catch(console.error)),t=await t,a(),t),o=[];return r==null||r.items.forEach(l=>l.genres.forEach(d=>{o.length>=20||(o.some(_=>_.name===d)?o.find(_=>_.name===d).count++:o.push({name:d,count:1}))})),(l,d)=>(f(),p("section",mt,[_t,x(pt,{"doughnut-data":o})]))}});class yt{constructor(t,a,e){k(this,"top");k(this,"right");k(this,"bottom");k(this,"left");this.left=t,this.right=t+e,this.top=a+e,this.bottom=a}overlaps(t){const a=this.left<=t.right&&this.right>=t.left,e=this.top>=t.bottom&&this.bottom<=t.top;return a&&e}}class vt{constructor(t){k(this,"size");k(this,"squares");this.size=t,this.squares=[]}getNext(t){const a=[...Array(100-this.size).keys()];let e=null;for(;a.length;){const n=Math.floor(Math.random()*a.length),r=a.splice(n,1)[0],o=new yt(r,t,this.size);if(this.isFree(o)){this.squares.push(o),e=r;break}}return e===null?(console.warn("Hidden"),{display:"none"}):{left:`${e}%`,bottom:`${t}%`}}isFree(t){for(const a of this.squares)if(a.overlaps(t))return!1;return!0}}const bt={id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 509.94 795.87"},wt=Q('<defs></defs><path d="M30.23 0h449.48c16.68 0 30.23 13.54 30.23 30.23v276.35H0V30.23C0 13.54 13.54 0 30.23 0Z" style="fill:#17164b;"></path><path d="M0 306.58h509.94V765.8c0 16.59-13.47 30.07-30.07 30.07H30.07C13.47 795.87 0 782.4 0 765.8V306.58Z" style="fill:#34416d;"></path><path style="fill:#fdfdfd;" d="m0 306.58 52.65-102.97 24-12.38 3.09-12.78 15.49-21.68 66.19-126.96 78.19 13.16 45.29 88.64 33.68-16.64 53.03 56.9 12 .78 8.13 1.16 6.97 8.9 51.1 80.9 48 12.39 12.13 30.58H0z"></path><path style="fill:#eff6fc;" d="m0 306.58 59.81-88.26 12-7.74 34.84 4.45 72.58-168.97 44.71 10.26 53.61 106.84 8.13-30.58 31.55-17.23 35.8 52.65 6.78 15.29 14.9 6.58 4.84 4.45 1.74 12.58 5.42 17.42L408.39 264l43.74 8.71 17.03 33.87H0z"></path><path style="fill:#c6dced;" d="m0 306.58 74.52-55.74h29.61l23.61 7.74 33.29-69.87 29.23-31.74 12-4.07-11.61 67.94-4.07 31.55 6 1.35 44.71-53.22 16.65.19 17.41 20.71 21.49 5.61 14.51-14.71 15.3-3.09 33.29 26.71 19.54 44.12 48.39 1.75 39.1 24.77H0z"></path><path style="fill:#2433ab;" d="m0 306.58 6.19 40.26 54.2 22.45 41.03 108.39 11.61 3.87h11.62l11.61 27.1 11.61 17.03L202.84 576l28.64 40.26 34.07 89.8 5.42-6.96 3.87 17.8h9.29l30.97-65.03 18.58-24 30.97-52.64 31.74-10.84 43.35-120.78 70.2-137.03H0z"></path><path id="Shading_1" class="cls-1" d="M0 422.81s58.32-23.12 133.68 0 100.13 7.85 128 0 71.23-22.09 140.39 0 107.87 0 107.87 0v343.76c0 16.18-13.12 29.29-29.29 29.29H29.29C13.12 795.87 0 782.76 0 766.58V422.81Z"></path><path id="Shading_2" class="cls-1" d="M0 520.26s12.9-4.34 39.74 18.99 84.65 0 91.87 0 53.68-21.26 123.35 0 108.69 11.4 131.61 0 87.74-22.3 123.35 0v227.2c0 16.25-13.17 29.42-29.42 29.42H29.42C13.17 795.87 0 782.7 0 766.45V520.26Z"></path><path id="Shading_3" class="cls-1" d="M0 667.87s32.52 1.45 64.52-12.18 72.26-8.05 98.06 0 69.16 31.48 136.26 2.22 114.58-2.22 114.58-2.22 47.48 29.11 96.52 0v110.24c0 16.53-13.4 29.94-29.94 29.94H29.94C13.4 795.87 0 782.47 0 765.93v-98.06Z"></path><path class="cls-1" d="M0 306.58h509.94v460.13c0 16.11-13.06 29.16-29.16 29.16H29.16C13.06 795.87 0 782.81 0 766.71V306.58Z"></path>',11),xt=[wt];function Ct(s,t){return f(),p("svg",bt,xt)}const kt={render:Ct},$t={class:"w-full h-full relative"},St=["src","title"],P=b({__name:"Iceberg",props:{items:null,gridItemSize:null},setup(s){var n;const t=s,a=10,e=new vt((n=t.gridItemSize)!=null?n:a);return(r,o)=>(f(),p("div",$t,[x(u(kt),{class:"absolute h-full w-full"}),(f(!0),p(tt,null,et(t.items,l=>{var d;return f(),p("img",{key:l.info,class:"absolute h-auto",style:U({width:`${(d=t.gridItemSize)!=null?d:a}%`,...u(e).getNext(l.level)}),src:l.imageSrc,title:l.info},null,12,St)}),128))]))}}),Dt={class:"w-full h-full flex flex-col justify-center items-center"},Tt=h("h1",{class:"text-[30px] pb-6"},"Recently Played Tracks",-1),Ot=b({__name:"RecentlyPlayedTracks",async setup(s){let t,a;const e=[];let n="/me/player/recently-played";for(;n!=null;){const l=([t,a]=T(()=>v({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items.map(d=>d.track)),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return(l,d)=>{const _=P;return f(),p("section",Dt,[Tt,x(_,{items:u(o).map(c=>{var i;return{info:c.name,imageSrc:(i=c.album.images[0])==null?void 0:i.url,level:c.popularity}})},null,8,["items"])])}}}),jt={class:"w-full h-full flex flex-col justify-center items-center"},Mt=h("h1",{class:"text-[30px] pb-6"},"Top Tracks",-1),Et=b({__name:"TopTracks",async setup(s){let t,a;const e=[];let n="/me/top/tracks";for(;n!=null;){const l=([t,a]=T(()=>v({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return(l,d)=>{const _=P;return f(),p("section",jt,[Mt,x(_,{items:u(o).map(c=>{var i;return{info:c.name,imageSrc:(i=c.album.images[0])==null?void 0:i.url,level:c.popularity}})},null,8,["items"])])}}}),Ht={class:"w-full h-full flex flex-col justify-center items-center"},It=h("h1",{class:"text-[30px] pb-6"},"Top Artists",-1),qt=b({__name:"TopArtists",async setup(s){let t,a;const e=[];let n="/me/top/artists";for(;n!=null;){const l=([t,a]=T(()=>v({endpoint:n,query:{limit:50}})),t=await t,a(),t);e.push(...l.items),n=l.next}const r={};for(const l of e)r[l.name]===void 0&&(r[l.name]=l);const o=Object.values(r);return(l,d)=>{const _=P;return f(),p("section",Ht,[It,x(_,{items:u(o).map(c=>{var i;return{info:c.name,imageSrc:(i=c.images[0])==null?void 0:i.url,level:c.popularity}})},null,8,["items"])])}}}),Pt={class:"w-full flex justify-around font-bold pt-6 pb-2"},zt=b({__name:"TimeframeSelection",setup(s){const t=D("activeTimeframe",()=>y.Month);return(a,e)=>(f(),p("div",Pt,[h("span",{class:H(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[u(t)===u(y).Month?"before:w-full !text-white":"before:w-0"]]),onClick:e[0]||(e[0]=n=>t.value=u(y).Month)}," last month ",2),h("span",{class:H(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[u(t)===u(y).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:e[1]||(e[1]=n=>t.value=u(y).HalfYear)}," last 6 months ",2),h("span",{class:H(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[u(t)===u(y).Year?"before:w-full !text-white":"before:w-0"]]),onClick:e[2]||(e[2]=n=>t.value=u(y).Year)}," last year ",2)]))}}),Lt=Y(zt,[["__scopeId","data-v-4dcae966"]]),Rt={key:0,class:"bg-spotify-green bg-opacity-50"},At={key:0},Ut={class:"flex h-16 justify-start"},Yt={class:"h-full p-1"},Nt=["src"],Bt={class:"my-auto"},Ft={class:"text-white"},Gt={class:"text-gray"},Vt={class:"my-auto w-24 text-center self-center"},Zt={key:0,class:"flex align-baseline justify-evenly"},Jt={class:"h-1 relative"},Wt=h("div",{class:"absolute bg-gray h-full w-full"},null,-1),Kt={key:1,class:"text-center h-16"},Xt=b({__name:"MusicPlayer",async setup(s){let t,a;const e=D("$y4C0JPT9MN"),n=([t,a]=T(()=>v({endpoint:"/me"})),t=await t,a(),t);o();function r(c){if(c===null)return"~:~";const i=Math.floor(c/1e3);return`${Math.floor(i/60)}:${(i%60).toString().padStart(2,"0")}`}function o(){v({endpoint:"/me/player",query:{additional_types:"track",market:n.country}}).then(c=>{e.value=c}).catch(c=>{console.error(c)}).finally(()=>{setTimeout(()=>o(),500)})}function l(){v({endpoint:"/me/player/previous",method:"POST"}).catch(c=>{alert(c.message)})}function d(){e.value.is_playing?v({endpoint:"/me/player/pause",method:"PUT",query:{device_id:e.value.device.id}}).catch(c=>{alert(c.message)}):v({endpoint:"/me/player/play",method:"PUT",query:{device_id:e.value.device.id}}).catch(c=>{alert(c.message)})}function _(){v({endpoint:"/me/player/next",method:"POST"}).catch(c=>{alert(c.message)})}return(c,i)=>{var m;return f(),p("div",null,[u(e)?(f(),p("div",Rt,[u(e).item?(f(),p("div",At,[h("div",Ut,[h("div",Yt,[h("img",{class:"max-h-full",src:(m=u(e).item.album.images[0])==null?void 0:m.url,alt:"Album Cover"},null,8,Nt)]),h("div",Bt,[h("p",Ft,O(u(e).item.name),1),h("p",Gt,O(u(e).item.artists.map(g=>g.name).join(", ")),1)]),h("div",Vt,[u(n).product==="premium"?(f(),p("div",Zt,[h("button",{onClick:i[0]||(i[0]=g=>l())},"\u23EE"),h("button",{onClick:i[1]||(i[1]=g=>d())},"\u23EF"),h("button",{onClick:i[2]||(i[2]=g=>_())},"\u23ED")])):I("",!0),h("p",null,O(r(u(e).progress_ms))+" / "+O(r(u(e).item.duration_ms)),1)])]),h("div",Jt,[Wt,u(e).progress_ms!==null?(f(),p("div",{key:0,class:"absolute bg-white h-full",style:U({width:`${u(e).progress_ms/u(e).item.duration_ms*100}%`})},null,4)):I("",!0)])])):(f(),p("div",Kt," Ad is playing "))])):I("",!0)])}}}),Qt={class:"flex justify-center items-center h-[80vh] w-full p-5"},te=b({__name:"home",setup(s){const t=D("currentSlide",()=>0),a=D("activeTimeframe",()=>y.Month),e=[gt,Ot,Et,qt],n=()=>{t.value++,t.value>=e.length&&(t.value=0)};return(r,o)=>{const l=Lt,d=Xt;return f(),p("section",null,[x(l),h("div",Qt,[x(at,{name:"statistics",mode:"out-in"},{default:st(()=>[(f(),A(nt(e[u(t)]),{key:u(a),onClick:n}))]),_:1})]),x(d)])}}});const re=Y(te,[["__scopeId","data-v-eeff5397"]]);export{re as default};
