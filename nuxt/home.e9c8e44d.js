import{a as w,i as y,o as c,b as u,e as s,j as b,u as o,k as $,w as P,l as f,m as x,p as j,q as k}from"./entry.92b08503.js";const N={class:"w-full flex justify-around font-bold px-5 py-2"},E=w({__name:"TimeframeSelection",setup(_){const n=y("activeTimeframe",()=>1,"$G9zybYKSvY");return(a,e)=>(c(),u("div",N,[s("span",{class:b(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[o(n)===0?"before:w-full !text-white":"before:w-0"]]),onClick:e[0]||(e[0]=l=>n.value=0)}," last month ",2),s("span",{class:b(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[o(n)===1?"before:w-full !text-white":"before:w-0"]]),onClick:e[1]||(e[1]=l=>n.value=1)}," last year ",2),s("span",{class:b(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[o(n)===2?"before:w-full !text-white":"before:w-0"]]),onClick:e[2]||(e[2]=l=>n.value=2)}," all time ",2)]))}}),M=$(E,[["__scopeId","data-v-57a53051"]]);async function m({endpoint:_,query:n,body:a,method:e,headers:l}){const p=localStorage.getItem("auth-token");if(!p)throw Error("not logged in");const d=new URL(`https://api.spotify.com/v1${_}`);if(n)for(let[i,v]of Object.entries(n))d.searchParams.append(i,v);return fetch(d,{method:e!=null?e:"GET",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json",...l},body:a?JSON.stringify(a):void 0}).then(i=>i.json()).then(i=>{if(i.error)throw i.error;return i})}const O={key:0,class:"bg-spotify-green bg-opacity-50"},q={key:0},z={class:"flex h-16 justify-start"},B={class:"h-full p-1"},A=["src"],I={class:"my-auto"},U={class:"text-white"},V={class:"text-gray"},D={class:"my-auto w-24 text-center self-center"},G={key:0,class:"flex align-baseline justify-evenly"},J={class:"h-1 relative"},K=s("div",{class:"absolute bg-gray h-full w-full"},null,-1),Q={key:1,class:"text-center h-16"},Y={key:1},Z=w({__name:"MusicPlayer",async setup(_){let n,a,e=y("$y4C0JPT9MN"),l=y("$pmQmXMhZQP"),p=([n,a]=P(()=>m({endpoint:"/me"}).catch(t=>l.value=t)),n=await n,a(),n),d=y("$WKN0mH1NwZ");v();function i(t){if(typeof t!="number")return"~:~";let r=Math.floor(t/1e3);return`${Math.floor(r/60)}:${(r%60).toString().padStart(2,"0")}`}function v(){d.value&&clearTimeout(d.value),d.value=null,m({endpoint:"/me/player",query:{additional_types:"track",market:p.country}}).then(t=>{e.value=t}).catch(t=>{console.error(t)}).finally(()=>{d.value=setTimeout(()=>v(),500)})}function T(){m({endpoint:"/me/player/previous",method:"POST"}).catch(t=>{alert(t.message)})}function S(){e.value.is_playing?m({endpoint:"/me/player/pause",method:"PUT",query:{device_id:e.value.device.id}}).catch(t=>{alert(t.message)}):m({endpoint:"/me/player/play",method:"PUT",query:{device_id:e.value.device.id}}).catch(t=>{alert(t.message)})}function C(){m({endpoint:"/me/player/next",method:"POST"}).catch(t=>{alert(t.message)})}return(t,r)=>{var g;return c(),u("div",null,[o(e)?(c(),u("div",O,[o(e).item?(c(),u("div",q,[s("div",z,[s("div",B,[s("img",{class:"max-h-full",src:(g=o(e).item.album.images[0])==null?void 0:g.url,alt:""},null,8,A)]),s("div",I,[s("p",U,f(o(e).item.name),1),s("p",V,f(o(e).item.artists.map(h=>h.name).join(", ")),1)]),s("div",D,[o(p).product==="premium"?(c(),u("div",G,[s("button",{onClick:r[0]||(r[0]=h=>T())},"\u23EE"),s("button",{onClick:r[1]||(r[1]=h=>S())},"\u23EF"),s("button",{onClick:r[2]||(r[2]=h=>C())},"\u23ED")])):x("",!0),s("p",null,f(i(o(e).progress_ms))+" / "+f(i(o(e).item.duration_ms)),1)])]),s("div",J,[K,s("div",{class:"absolute bg-white h-full",style:j({width:`${o(e).progress_ms/o(e).item.duration_ms*100}%`})},null,4)])])):(c(),u("div",Q," Ad is playing "))])):x("",!0),o(l)?(c(),u("div",Y," Miniplayer failed: "+f(o(l).message),1)):x("",!0)])}}}),F={};function H(_,n){const a=M,e=Z;return c(),u("div",null,[k(a),k(e)])}const R=$(F,[["render",H]]);export{R as default};
