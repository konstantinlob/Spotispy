import{a as y,i as P,o as m,b as D,e as b,j as x,u as c,k as R,C as $,s as B,r as H,w as U,l as I,m as N,p as f,q as A,D as T,v as j,x as z,y as G,c as Y,f as M,z as E,A as L,B as K,T as F,E as J}from"./entry.7bec7ab6.js";var u=(a=>(a[a.Month=0]="Month",a[a.HalfYear=1]="HalfYear",a[a.Year=2]="Year",a))(u||{});const Q={class:"w-full flex justify-around font-bold pt-6 pb-2"},W=y({__name:"TimeframeSelection",setup(a){const e=P("activeTimeframe",()=>u.Month);return(r,t)=>(m(),D("div",Q,[b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).Month?"before:w-full !text-white":"before:w-0"]]),onClick:t[0]||(t[0]=s=>e.value=c(u).Month)}," last month ",2),b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:t[1]||(t[1]=s=>e.value=c(u).HalfYear)}," last 6 months ",2),b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).Year?"before:w-full !text-white":"before:w-0"]]),onClick:t[2]||(t[2]=s=>e.value=c(u).Year)}," last year ",2)]))}}),X=R(W,[["__scopeId","data-v-e7d2fb3c"]]),Z={},V={class:"bg-purple w-full h-full rounded-md"};function ee(a,e){return m(),D("div",V,"Purple Placeholder")}const te=R(Z,[["render",ee]]);var v;(function(a){a.ChartRendered="chart:rendered",a.ChartUpdated="chart:updated",a.ChartDestroyed="chart:destroyed",a.LabelsUpdated="labels:updated"})(v||(v={}));function C(a,e,r,t){a(e,r),t!==void 0&&t.emit(v.ChartRendered)}function ae(a,e){a.update(),e!==void 0&&e.emit(v.ChartUpdated)}function w(a,e){a.destroy(),e!==void 0&&e.emit(v.ChartDestroyed)}function ne(a,e){const r={labels:typeof a.labels>"u"?[]:[...a.labels],datasets:[]};return q(r,{...a},e),r}function q(a,e,r){const t=[];a.datasets=e.datasets.map(s=>{const n=a.datasets.find(o=>o[r]===s[r]);return!n||!s.data||t.includes(n)?{...s}:(t.push(n),Object.assign(n,s),n)})}function se(a,e,r){a.data.labels=e,r!==void 0&&r.emit(v.LabelsUpdated)}function re(a,e){a.options={...e}}function oe(a,e){const r=a.datasets.map(s=>s.label),t=e.datasets.map(s=>s.label);return e.datasets.length===a.datasets.length&&r.every((s,n)=>s===t[n])}const le="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",ie="Update ERROR: chart instance not found",ce=(a,e,r)=>y({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:a},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(t,s){$.register(r);const n=B(null),o=H(null);function i(l,d){if(n.value!==null&&w(f(n.value),s),o.value===null)throw new Error(le);{const p=ne(l,t.datasetIdKey),g=o.value.getContext("2d");g!==null&&(n.value=new $(g,{type:e,data:j(l)?new Proxy(p,{}):p,options:d,plugins:t.plugins}))}}function h(l,d){const p=j(l)?f(l):{...l},g=j(d)?f(d):{...d};if(Object.keys(g).length>0){const _=f(n.value);oe(p,g)&&_!==null?(q(_==null?void 0:_.data,p,t.datasetIdKey),p.labels!==void 0&&se(_,p.labels,s),k()):(_!==null&&w(_,s),C(i,t.chartData,t.chartOptions,s))}else n.value!==null&&w(f(n.value),s),C(i,t.chartData,t.chartOptions,s)}function O(l){const d=f(n.value);d!==null?(re(d,l),k()):C(i,t.chartData,t.chartOptions,s)}function k(){const l=f(n.value);l!==null?ae(l,s):console.error(ie)}return U(()=>t.chartData,(l,d)=>h(l,d),{deep:!0}),U(()=>t.chartOptions,l=>O(l),{deep:!0}),I(()=>{"datasets"in t.chartData&&t.chartData.datasets.length>0&&C(i,t.chartData,t.chartOptions,s)}),N(()=>{n.value!==null&&w(f(n.value),s)}),s.expose({chart:n,updateChart:k}),()=>A("div",{style:t.styles,class:t.cssClasses},[A("canvas",{id:t.chartId,width:t.width,height:t.height,ref:o})])}}),ue=ce("doughnut-chart","doughnut",T),de=y({__name:"Doughnut",props:{genres:{default:()=>[{name:"Missing Data",count:1}]}},setup(a){const e=a;$.register(...z);const{genres:r}=G(e),t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},s={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return r.value.forEach(n=>{s.labels.push(n.name),s.datasets[0].data.push(n.count)}),(n,o)=>(m(),Y(c(ue),{"chart-data":s,"chart-options":t}))}});function S({endpoint:a,query:e,body:r,method:t}){const s=localStorage.getItem("auth-token");if(!s)return M("/login"),Promise.reject(new Error("missing auth token"));const n=new URL(`https://api.spotify.com/v1${a}`);return e&&Object.entries(e).forEach(([o,i])=>n.searchParams.append(o,i)),fetch(n,{method:t!=null?t:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0}).then(o=>o.ok?o.json():o.status===403?(M("/login"),Promise.reject(new Error("403 unauthorized"))):o.text()).then(o=>(o.error&&console.error(o.error),o))}const fe={class:"w-full h-full flex flex-col justify-center items-center"},he=b("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),pe=y({__name:"GenreDoughnut",async setup(a){let e,r;const t=P("activeTimeframe").value,s={[u.Month]:([e,r]=E(()=>S({endpoint:"/me/top/artists",query:{time_range:"short_term"}})),e=await e,r(),e),[u.HalfYear]:([e,r]=E(()=>S({endpoint:"/me/top/artists",query:{time_range:"medium_term"}})),e=await e,r(),e),[u.Year]:([e,r]=E(()=>S({endpoint:"/me/top/artists",query:{time_range:"long_term"}})),e=await e,r(),e)},n=[];return s[t].items.forEach(o=>o.genres.forEach(i=>{n.length>=20||(n.some(h=>h.name===i)?n.find(h=>h.name===i).count++:n.push({name:i,count:1}))})),(o,i)=>(m(),D("section",fe,[he,L(de,{genres:n})]))}}),_e={class:"flex justify-center items-center h-[80vh] w-full p-5"},me=y({__name:"home",setup(a){const r=P("currentSlide",()=>0),t=()=>{r.value++,r.value>=2&&(r.value=0)};return(s,n)=>{const o=X,i=te,h=pe;return m(),D("section",null,[L(o),b("div",_e,[L(F,{name:"statistics",mode:"out-in"},{default:K(()=>[c(r)===0?(m(),Y(i,{key:0,onClick:n[0]||(n[0]=O=>t())})):c(r)===1?(m(),Y(h,{key:1,onClick:n[1]||(n[1]=O=>t())})):J("",!0)]),_:1})])])}}});const be=R(me,[["__scopeId","data-v-b7128e36"]]);export{be as default};
