import{a as w,i as L,o as v,b as O,e as y,j as x,u as i,k as U,C as j,s as H,r as I,w as A,l as P,m as N,p as h,q as M,D as T,v as E,x as z,y as G,c as R,f as q,z as S,A as Y,B as F,T as K,E as J}from"./entry.e4905d5b.js";var u=(a=>(a[a.Month=0]="Month",a[a.HalfYear=1]="HalfYear",a[a.Year=2]="Year",a))(u||{});const Q={class:"w-full flex justify-around font-bold pt-6 pb-2"},W=w({__name:"TimeframeSelection",setup(a){const e=L("activeTimeframe",()=>u.Month);return(r,t)=>(v(),O("div",Q,[y("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[i(e)===i(u).Month?"before:w-full !text-white":"before:w-0"]]),onClick:t[0]||(t[0]=s=>e.value=i(u).Month)}," last month ",2),y("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[i(e)===i(u).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:t[1]||(t[1]=s=>e.value=i(u).HalfYear)}," last 6 months ",2),y("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[i(e)===i(u).Year?"before:w-full !text-white":"before:w-0"]]),onClick:t[2]||(t[2]=s=>e.value=i(u).Year)}," last year ",2)]))}}),X=U(W,[["__scopeId","data-v-e7d2fb3c"]]),Z={},V={class:"bg-purple w-full h-full rounded-md"};function ee(a,e){return v(),O("div",V,"Purple Placeholder")}const te=U(Z,[["render",ee]]);var g;(function(a){a.ChartRendered="chart:rendered",a.ChartUpdated="chart:updated",a.ChartDestroyed="chart:destroyed",a.LabelsUpdated="labels:updated"})(g||(g={}));function C(a,e,r,t){a(e,r),t!==void 0&&t.emit(g.ChartRendered)}function ae(a,e){a.update(),e!==void 0&&e.emit(g.ChartUpdated)}function D(a,e){a.destroy(),e!==void 0&&e.emit(g.ChartDestroyed)}function ne(a,e){const r={labels:typeof a.labels>"u"?[]:[...a.labels],datasets:[]};return B(r,{...a},e),r}function B(a,e,r){const t=[];a.datasets=e.datasets.map(s=>{const n=a.datasets.find(o=>o[r]===s[r]);return!n||!s.data||t.includes(n)?{...s}:(t.push(n),Object.assign(n,s),n)})}function se(a,e,r){a.data.labels=e,r!==void 0&&r.emit(g.LabelsUpdated)}function re(a,e){a.options={...e}}function oe(a,e){const r=a.datasets.map(s=>s.label),t=e.datasets.map(s=>s.label);return e.datasets.length===a.datasets.length&&r.every((s,n)=>s===t[n])}const le="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",ie="Update ERROR: chart instance not found",ce=(a,e,r)=>w({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:a},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(t,s){j.register(r);const n=H(null),o=I(null);function c(l,d){if(n.value!==null&&D(h(n.value),s),o.value===null)throw new Error(le);{const _=ne(l,t.datasetIdKey),b=o.value.getContext("2d");b!==null&&(n.value=new j(b,{type:e,data:E(l)?new Proxy(_,{}):_,options:d,plugins:t.plugins}))}}function f(l,d){const _=E(l)?h(l):{...l},b=E(d)?h(d):{...d};if(Object.keys(b).length>0){const m=h(n.value);oe(_,b)&&m!==null?(B(m==null?void 0:m.data,_,t.datasetIdKey),_.labels!==void 0&&se(m,_.labels,s),k()):(m!==null&&D(m,s),C(c,t.chartData,t.chartOptions,s))}else n.value!==null&&D(h(n.value),s),C(c,t.chartData,t.chartOptions,s)}function p(l){const d=h(n.value);d!==null?(re(d,l),k()):C(c,t.chartData,t.chartOptions,s)}function k(){const l=h(n.value);l!==null?ae(l,s):console.error(ie)}return A(()=>t.chartData,(l,d)=>f(l,d),{deep:!0}),A(()=>t.chartOptions,l=>p(l),{deep:!0}),P(()=>{"datasets"in t.chartData&&t.chartData.datasets.length>0&&C(c,t.chartData,t.chartOptions,s)}),N(()=>{n.value!==null&&D(h(n.value),s)}),s.expose({chart:n,updateChart:k}),()=>M("div",{style:t.styles,class:t.cssClasses},[M("canvas",{id:t.chartId,width:t.width,height:t.height,ref:o})])}}),ue=ce("doughnut-chart","doughnut",T),de=w({__name:"Doughnut",props:{doughnutData:{default:()=>[{name:"Missing Data",count:1}]}},setup(a){const e=a;j.register(...z);const{doughnutData:r}=G(e),t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},s={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return r.value.forEach(n=>{s.labels.push(n.name),s.datasets[0].data.push(n.count)}),(n,o)=>(v(),R(i(ue),{"chart-data":s,"chart-options":t}))}});function $({endpoint:a,query:e,body:r,method:t}){const s=localStorage.getItem("auth-token");if(!s)throw q("/login"),new Error("missing authorization token");const n=new URL(`https://api.spotify.com/v1${a}`);return e&&Object.entries(e).forEach(([o,c])=>n.searchParams.append(o,c)),fetch(n,{method:t!=null?t:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0}).then(o=>{if(o.ok)return o.json();if(o.status===403)throw q("/login"),new Error("Recieved '403 Forbidden' response from Spotify");return o.text()}).then(o=>{if(o.error)throw new Error(o.error);return o})}const fe={class:"w-full h-full flex flex-col justify-center items-center"},he=y("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),pe=w({__name:"GenreDoughnut",async setup(a){var o;let e,r;const t=L("activeTimeframe").value,s={[u.Month]:([e,r]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"short_term"}}).catch(console.error)),e=await e,r(),e),[u.HalfYear]:([e,r]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"medium_term"}}).catch(console.error)),e=await e,r(),e),[u.Year]:([e,r]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"long_term"}}).catch(console.error)),e=await e,r(),e)},n=[];return(o=s[t])==null||o.items.forEach(c=>c.genres.forEach(f=>{n.length>=20||(n.some(p=>p.name===f)?n.find(p=>p.name===f).count++:n.push({name:f,count:1}))})),(c,f)=>(v(),O("section",fe,[he,Y(de,{"doughnut-data":n})]))}}),_e={class:"flex justify-center items-center h-[80vh] w-full p-5"},me=w({__name:"home",setup(a){const r=L("currentSlide",()=>0),t=()=>{r.value++,r.value>=2&&(r.value=0)};return(s,n)=>{const o=X,c=te,f=pe;return v(),O("section",null,[Y(o),y("div",_e,[Y(K,{name:"statistics",mode:"out-in"},{default:F(()=>[i(r)===0?(v(),R(c,{key:0,onClick:n[0]||(n[0]=p=>t())})):i(r)===1?(v(),R(f,{key:1,onClick:n[1]||(n[1]=p=>t())})):J("",!0)]),_:1})])])}}});const be=U(me,[["__scopeId","data-v-b7128e36"]]);export{be as default};
