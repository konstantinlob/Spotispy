import{a as y,i as L,o as m,b as D,e as b,j as x,u as c,k as U,C as j,s as H,r as I,w as A,l as P,m as N,p as f,q as M,D as T,v as E,x as z,y as G,c as R,f as q,z as S,A as Y,B as F,T as K,E as J}from"./entry.4af123ce.js";var u=(a=>(a[a.Month=0]="Month",a[a.HalfYear=1]="HalfYear",a[a.Year=2]="Year",a))(u||{});const Q={class:"w-full flex justify-around font-bold pt-6 pb-2"},W=y({__name:"TimeframeSelection",setup(a){const e=L("activeTimeframe",()=>u.Month);return(s,t)=>(m(),D("div",Q,[b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).Month?"before:w-full !text-white":"before:w-0"]]),onClick:t[0]||(t[0]=r=>e.value=c(u).Month)}," last month ",2),b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).HalfYear?"before:w-full !text-white":"before:w-0"]]),onClick:t[1]||(t[1]=r=>e.value=c(u).HalfYear)}," last 6 months ",2),b("span",{class:x(["cursor-pointer relative hidden-green-underline hover:text-spotify-green transition-colors",[c(e)===c(u).Year?"before:w-full !text-white":"before:w-0"]]),onClick:t[2]||(t[2]=r=>e.value=c(u).Year)}," last year ",2)]))}}),X=U(W,[["__scopeId","data-v-e7d2fb3c"]]),Z={},V={class:"bg-purple w-full h-full rounded-md"};function ee(a,e){return m(),D("div",V,"Purple Placeholder")}const te=U(Z,[["render",ee]]);var v;(function(a){a.ChartRendered="chart:rendered",a.ChartUpdated="chart:updated",a.ChartDestroyed="chart:destroyed",a.LabelsUpdated="labels:updated"})(v||(v={}));function w(a,e,s,t){a(e,s),t!==void 0&&t.emit(v.ChartRendered)}function ae(a,e){a.update(),e!==void 0&&e.emit(v.ChartUpdated)}function C(a,e){a.destroy(),e!==void 0&&e.emit(v.ChartDestroyed)}function ne(a,e){const s={labels:typeof a.labels>"u"?[]:[...a.labels],datasets:[]};return B(s,{...a},e),s}function B(a,e,s){const t=[];a.datasets=e.datasets.map(r=>{const n=a.datasets.find(o=>o[s]===r[s]);return!n||!r.data||t.includes(n)?{...r}:(t.push(n),Object.assign(n,r),n)})}function re(a,e,s){a.data.labels=e,s!==void 0&&s.emit(v.LabelsUpdated)}function se(a,e){a.options={...e}}function oe(a,e){const s=a.datasets.map(r=>r.label),t=e.datasets.map(r=>r.label);return e.datasets.length===a.datasets.length&&s.every((r,n)=>r===t[n])}const ie="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",le="Update ERROR: chart instance not found",ce=(a,e,s)=>y({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:a},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(t,r){j.register(s);const n=H(null),o=I(null);function l(i,d){if(n.value!==null&&C(f(n.value),r),o.value===null)throw new Error(ie);{const p=ne(i,t.datasetIdKey),g=o.value.getContext("2d");g!==null&&(n.value=new j(g,{type:e,data:E(i)?new Proxy(p,{}):p,options:d,plugins:t.plugins}))}}function h(i,d){const p=E(i)?f(i):{...i},g=E(d)?f(d):{...d};if(Object.keys(g).length>0){const _=f(n.value);oe(p,g)&&_!==null?(B(_==null?void 0:_.data,p,t.datasetIdKey),p.labels!==void 0&&re(_,p.labels,r),O()):(_!==null&&C(_,r),w(l,t.chartData,t.chartOptions,r))}else n.value!==null&&C(f(n.value),r),w(l,t.chartData,t.chartOptions,r)}function k(i){const d=f(n.value);d!==null?(se(d,i),O()):w(l,t.chartData,t.chartOptions,r)}function O(){const i=f(n.value);i!==null?ae(i,r):console.error(le)}return A(()=>t.chartData,(i,d)=>h(i,d),{deep:!0}),A(()=>t.chartOptions,i=>k(i),{deep:!0}),P(()=>{"datasets"in t.chartData&&t.chartData.datasets.length>0&&w(l,t.chartData,t.chartOptions,r)}),N(()=>{n.value!==null&&C(f(n.value),r)}),r.expose({chart:n,updateChart:O}),()=>M("div",{style:t.styles,class:t.cssClasses},[M("canvas",{id:t.chartId,width:t.width,height:t.height,ref:o})])}}),ue=ce("doughnut-chart","doughnut",T),de=y({__name:"Doughnut",props:{doughnutData:{default:()=>[{name:"Missing Data",count:1}]}},setup(a){const e=a;j.register(...z);const{doughnutData:s}=G(e),t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"white"}}}},r={labels:[],datasets:[{backgroundColor:["#e6194b","#3cb44b","#ffe119","#4363d8","#f58231","#911eb4","#46f0f0","#f032e6","#bcf60c","#fabebe","#008080","#e6beff","#9a6324","#fffac8","#800000","#aaffc3","#808000","#ffd8b1","#000075","#808080"],borderColor:"#191414",data:[]}]};return s.value.forEach(n=>{r.labels.push(n.name),r.datasets[0].data.push(n.count)}),(n,o)=>(m(),R(c(ue),{"chart-data":r,"chart-options":t}))}});function $({endpoint:a,query:e,body:s,method:t}){const r=localStorage.getItem("auth-token");if(!r)throw q("/login"),console.error("missing authorization token"),new Error("missing authorization token");const n=new URL(`https://api.spotify.com/v1${a}`);return e&&Object.entries(e).forEach(([o,l])=>n.searchParams.append(o,l)),fetch(n,{method:t!=null?t:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:s?JSON.stringify(s):void 0}).then(o=>{if(o.ok)return o.json();if(o.status===403)throw q("/login"),console.error("Recieved '403 Forbidden' response from Spotify"),new Error("403");return o.text()}).then(o=>{if(o.error)throw console.error(o.error),new Error(o.error);return o})}const fe={class:"w-full h-full flex flex-col justify-center items-center"},he=b("h1",{class:"text-[30px] pb-6"},"Your Favorite Genres",-1),pe=y({__name:"GenreDoughnut",async setup(a){let e,s;const t=L("activeTimeframe").value,r={[u.Month]:([e,s]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"short_term"}})),e=await e,s(),e),[u.HalfYear]:([e,s]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"medium_term"}})),e=await e,s(),e),[u.Year]:([e,s]=S(()=>$({endpoint:"/me/top/artists",query:{time_range:"long_term"}})),e=await e,s(),e)},n=[];return r[t].items.forEach(o=>o.genres.forEach(l=>{n.length>=20||(n.some(h=>h.name===l)?n.find(h=>h.name===l).count++:n.push({name:l,count:1}))})),(o,l)=>(m(),D("section",fe,[he,Y(de,{"doughnut-data":n})]))}}),_e={class:"flex justify-center items-center h-[80vh] w-full p-5"},me=y({__name:"home",setup(a){const s=L("currentSlide",()=>0),t=()=>{s.value++,s.value>=2&&(s.value=0)};return(r,n)=>{const o=X,l=te,h=pe;return m(),D("section",null,[Y(o),b("div",_e,[Y(K,{name:"statistics",mode:"out-in"},{default:F(()=>[c(s)===0?(m(),R(l,{key:0,onClick:n[0]||(n[0]=k=>t())})):c(s)===1?(m(),R(h,{key:1,onClick:n[1]||(n[1]=k=>t())})):J("",!0)]),_:1})])])}}});const be=U(me,[["__scopeId","data-v-b7128e36"]]);export{be as default};
